<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Document</title>
  </head>
  <style>
    .append_img img {
      height: 50%;
    }
  </style>
  <body>
    <div id="data" class="info_s"></div>
    <div id="email" class="info_f"></div>
    <div id="name" class="info_g"></div>
    <div id="username" class="info_h"></div>
    <div id="codepen" class="info_j"></div>
    <!-- <img id="myImage" url="" /> -->
    <div class="append_img" style="width: 200px; height: 200px"></div>
    <div class="testAppend" style="width: 200px; height: 200px"></div>

    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.18.0/firebase-app.js";
      // import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.18.0/firebase-analytics.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.18.0/firebase-analytics.js";

      import {
        getFirestore,
        collection,
        getDocs,
      } from "https://www.gstatic.com/firebasejs/9.18.0/firebase-firestore.js";
      import {
        getStorage,
        ref,
        getDownloadURL,
        listAll,
      } from "https://www.gstatic.com/firebasejs/9.18.0/firebase-storage.js";
      // https://firebase.google.com/docs/web/setup#available-libraries

      // Your web app's Firebase configuration

      const firebaseConfig = {
        apiKey: "AIzaSyBaPsn82u0CblmIXb9SktjOvfq2vRqeBPY",
        authDomain: "macos-luna.firebaseapp.com",
        databaseURL:
          "https://macos-luna-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "macos-luna",
        storageBucket: "macos-luna.appspot.com",
        messagingSenderId: "689056077392",
        appId: "1:689056077392:web:8275d5fe7f18ac35a5a355",
        measurementId: "G-5EMDZ1MDC2",
      };

      // Initialize Firebase

      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);
      const storage = getStorage(app);
      // const storage = getStorage(app);
      // const analytics = getAnalytics(app);

      const emailElem = document.getElementById("email");
      const nameElem = document.getElementById("name");
      const usernameElem = document.getElementById("username");
      const messageElem = document.getElementById("message");
      const codepenElem = document.getElementById("codepen");
      const imgAppend = document.querySelector(".append_img");
      const testAppend = document.querySelector(".testAppend");

      const docRef_onwer = getDocs(collection(db, "onwer"));
      const imagesRef = ref(storage, "gs://macos-luna.appspot.com/Images");

      docRef_onwer
        .then((querySnapshot) => {
          querySnapshot.forEach((doc) => {
            if (doc.exists) {
              const data = doc.data();
              emailElem.innerHTML = data.email;
              nameElem.innerHTML = data.firstName;
              usernameElem.innerHTML = data.lastName;
              testAppend.innerHTML = data.imagess;
 
              // codepenElem.innerHTML = data.social.codepen;

              // const imageRefss = data.imagess;
              // console.log(imageRefs,"imageRefs")
              // console.log(imageRefs, "imageRefs");
            } else {
              console.log("No such document!");
            }
          });
        })
        .catch((error) => {
          console.log("Error getting documents: ", error);
        });

      listAll(imagesRef)
        .then((res) => {
          res.items.forEach((itemRef) => {
            getDownloadURL(itemRef)
              .then((url) => {
                const img_c = document.createElement("img");
                img_c.src = url;
                imgAppend.appendChild(img_c);
              })
              .catch((error) => {
                console.error(error);
              });
          });
        })
        .catch((error) => {
          console.error(error);
        });
      // const imageRef = ref(
      //   storage,
      //   "gs://macos-luna.appspot.com/Images/macos2.webp"
      // );
      // getDownloadURL(imageRef)
      //   .then((url) => {
      //     console.log(url);
      //     console.log(imageRef);
      //     const img = document.getElementById("myImage");
      //     console.log(img, "img");
      //     img.src = url;
      //   })
      //   .catch((error) => {
      //     console.log(error);
      //   });
    </script>
  </body>
</html>
